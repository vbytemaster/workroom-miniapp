<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Workroom Mini App</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --bg: #111113;
  --bg2: #18181b;
  --bg3: #1e1e22;
  --bg4: #27272a;
  --border: #2a2a2e;
  --accent: #7c3aed;
  --accent2: #6d28d9;
  --text: #ffffff;
  --muted: #71717a;
  --green: #4ade80;
}
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  max-width: 480px;
  margin: 0 auto;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.header-left {
  display: flex;
  align-items: center;
  gap: 6px;
}
.logo-text {
  font-size: 11px;
  letter-spacing: 4px;
  font-weight: 300;
  color: var(--text);
}
.logo-badge {
  background: var(--accent);
  font-size: 8px;
  padding: 2px 5px;
  border-radius: 3px;
  letter-spacing: 1px;
  font-weight: 600;
}
.credits-pill {
  display: flex;
  align-items: center;
  gap: 4px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 5px 12px;
  font-size: 13px;
  font-weight: 600;
}
.credits-pill .coin { color: var(--accent); }

/* ===== NAV ===== */
.nav {
  display: flex;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.nav-item {
  flex: 1;
  padding: 8px 0 6px;
  text-align: center;
  font-size: 10px;
  color: var(--muted);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s;
  -webkit-tap-highlight-color: transparent;
}
.nav-item.active { color: var(--accent); border-bottom-color: var(--accent); }
.nav-icon { font-size: 16px; display: block; margin-bottom: 1px; }

/* ===== SCREENS ===== */
.screen { display: none; flex: 1; flex-direction: column; overflow: hidden; }
.screen.active { display: flex; }

/* ===== AI CHAT ===== */
.chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  flex-shrink: 0;
}
.model-selector {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 6px 14px;
  font-size: 13px;
  cursor: pointer;
  color: var(--text);
  transition: border-color 0.2s;
}
.model-selector:hover { border-color: var(--accent); }
.model-selector .icon { font-size: 14px; }
.model-selector .arrow { color: var(--muted); font-size: 10px; }
.history-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--muted);
  font-size: 13px;
  cursor: pointer;
  background: none;
  border: none;
}
.history-btn:hover { color: var(--text); }

/* Model dropdown */
.model-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 4px;
  z-index: 100;
  min-width: 200px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
}
.model-dropdown.open { display: block; }
.model-option {
  padding: 10px 14px;
  font-size: 13px;
  cursor: pointer;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background 0.15s;
}
.model-option:hover { background: var(--bg4); }
.model-option.selected { color: var(--accent); }
.model-option .type { font-size: 11px; color: var(--muted); margin-left: auto; }
.model-wrap { position: relative; }

/* Chat messages */
.chat-body {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 8px 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* Empty state */
.empty-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 40px 20px;
  gap: 12px;
}
.empty-icon { font-size: 48px; opacity: 0.5; }
.empty-title { font-size: 16px; color: var(--muted); line-height: 1.5; }
.suggestions {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-top: 8px;
}
.suggestion {
  background: var(--bg3);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 14px;
  border-radius: 20px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
  -webkit-tap-highlight-color: transparent;
}
.suggestion:hover { border-color: var(--accent); background: var(--bg4); }

/* Message blocks */
.msg-block { animation: fadeUp 0.25s ease; }
@keyframes fadeUp { from { opacity: 0; transform: translateY(6px); } }

.msg-user-block {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px 14px;
}
.msg-user-label {
  font-size: 11px;
  color: var(--muted);
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 4px;
}
.msg-user-text { font-size: 14px; line-height: 1.5; }

.msg-ai-block {
  padding: 0;
}
.msg-ai-label {
  font-size: 11px;
  color: var(--accent);
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 4px;
  font-weight: 600;
}
.msg-ai-text {
  font-size: 14px;
  line-height: 1.5;
  color: #d4d4d8;
}
.msg-ai-meta {
  display: flex;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}
.meta-tag {
  background: var(--bg3);
  border: 1px solid var(--border);
  padding: 3px 10px;
  border-radius: 10px;
  font-size: 11px;
  color: var(--muted);
}
.meta-tag b { color: var(--text); font-weight: 500; }

/* Result card */
.result-card {
  border-radius: 12px;
  overflow: hidden;
  margin-top: 8px;
  border: 1px solid var(--border);
  background: var(--bg3);
}
.result-image {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
  display: block;
}
.result-footer {
  padding: 10px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.result-cost { font-size: 12px; color: var(--muted); }
.result-actions { display: flex; gap: 6px; }
.r-btn {
  background: var(--bg4);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
}
.r-btn:hover { border-color: var(--accent); }
.r-btn-primary { background: var(--accent); border-color: var(--accent); }

/* Progress */
.progress-wrap { margin-top: 8px; }
.progress-text { font-size: 12px; color: var(--muted); margin-bottom: 4px; }
.progress-bar {
  width: 100%;
  height: 4px;
  background: var(--bg4);
  border-radius: 2px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), #a78bfa);
  border-radius: 2px;
  animation: loading 2.5s ease-in-out infinite;
}
@keyframes loading { 0%{width:5%} 50%{width:80%} 100%{width:100%} }

/* ===== INPUT AREA ===== */
.input-area {
  padding: 10px 16px 12px;
  background: var(--bg2);
  border-top: 1px solid var(--border);
  flex-shrink: 0;
  display: flex;
  gap: 8px;
  align-items: flex-end;
}
.input-box {
  flex: 1;
  display: flex;
  align-items: center;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 4px 6px 4px 14px;
  transition: border-color 0.2s;
}
.input-box:focus-within { border-color: var(--accent); }
.input-box input {
  flex: 1;
  background: none;
  border: none;
  color: var(--text);
  font-size: 14px;
  padding: 8px 4px;
  outline: none;
}
.input-box input::placeholder { color: var(--muted); }
.attach-btn {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 18px;
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
}
.attach-btn:hover { color: var(--text); }
.send-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: white;
  font-size: 16px;
  cursor: pointer;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s;
}
.send-btn:hover { background: var(--accent2); }

/* ===== OTHER SCREENS ===== */
.page-scroll {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 20px 16px;
}

/* Cards */
.card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
}
.card-title {
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
  font-size: 14px;
}
.row:last-child { border-bottom: none; }
.row-label { color: var(--muted); }
.row-value { display: flex; align-items: center; gap: 6px; }

/* Profile */
.profile-top {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}
.avatar-circle {
  width: 52px; height: 52px;
  border-radius: 50%;
  background: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
}
.profile-name { font-size: 15px; font-weight: 600; }
.profile-sub { font-size: 12px; color: var(--muted); margin-top: 2px; }

/* Plan card */
.plan-card {
  background: linear-gradient(135deg, var(--bg3) 0%, #2d1b69 100%);
  border: 1px solid var(--accent);
  border-radius: 14px;
  padding: 18px;
  margin-bottom: 14px;
}
.plan-name { font-size: 22px; font-weight: 700; }
.plan-sub { font-size: 12px; color: var(--muted); margin-top: 2px; }
.bar { width:100%; height:6px; background:rgba(255,255,255,0.1); border-radius:3px; margin:14px 0 6px; }
.bar-fill { height:100%; background:var(--accent); border-radius:3px; width:100%; }
.bar-info { display:flex; justify-content:space-between; font-size:12px; color:var(--muted); }

.btn-full {
  width: 100%;
  padding: 13px;
  border-radius: 10px;
  border: none;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.15s;
}
.btn-accent { background: var(--accent); color: white; }
.btn-accent:hover { background: var(--accent2); }
.btn-outline { background:none; border:1px solid #ef4444; color:#ef4444; }
.btn-outline-muted { background:none; border:1px solid var(--border); color:var(--muted); }

/* Settings */
.setting-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}
.setting-row:last-child { border-bottom: none; }
.setting-name { font-size: 14px; }
.setting-desc { font-size: 11px; color: var(--muted); margin-top: 1px; }
.toggle {
  width: 42px; height: 22px;
  background: var(--bg4);
  border-radius: 11px;
  position: relative;
  cursor: pointer;
  transition: background 0.2s;
  flex-shrink: 0;
}
.toggle.on { background: var(--accent); }
.toggle::after {
  content: '';
  position: absolute;
  width: 18px; height: 18px;
  background: white;
  border-radius: 50%;
  top: 2px; left: 2px;
  transition: transform 0.2s;
}
.toggle.on::after { transform: translateX(20px); }
.sel-btn {
  background: var(--bg4);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 5px 12px;
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
}

/* Pricing mini cards */
.price-card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  margin-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.price-card.featured { border-color: var(--accent); }
.price-left .p-name { font-size: 14px; font-weight: 600; }
.price-left .p-credits { font-size: 12px; color: var(--muted); margin-top: 2px; }
.price-right { font-size: 18px; font-weight: 700; }
.price-right span { font-size: 12px; color: var(--muted); font-weight: 400; }
.badge-best {
  background: var(--accent);
  font-size: 9px;
  padding: 2px 6px;
  border-radius: 4px;
  margin-left: 6px;
  font-weight: 600;
  vertical-align: middle;
}

/* FAQ */
.faq-item {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: border-color 0.15s;
}
.faq-item:hover { border-color: var(--accent); }
.faq-q { font-size: 14px; font-weight: 500; }
.faq-a { font-size: 13px; color: var(--muted); margin-top: 6px; line-height: 1.4; }

.section-title { font-size: 15px; font-weight: 600; margin: 20px 0 10px; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-left">
    <span class="logo-text">EVERYPIXEL</span>
    <span class="logo-badge">WorkRoom</span>
  </div>
  <div class="credits-pill"><span class="coin">ü™ô</span> <span id="credit-count">200</span></div>
</div>

<!-- ===== SCREEN: AI CHAT ===== -->
<div class="screen active" id="s-chat">
  <!-- Model selector row -->
  <div class="chat-header">
    <div class="model-wrap">
      <div class="model-selector" onclick="toggleModels()">
        <span class="icon">‚ú®</span>
        <span id="current-model">Seedream 4.0</span>
        <span class="arrow">‚ñæ</span>
      </div>
      <div class="model-dropdown" id="model-dropdown">
        <div class="model-option selected" onclick="pickModel('Seedream 4.0','üñº')">‚ú® Seedream 4.0 <span class="type">Image</span></div>
        <div class="model-option" onclick="pickModel('FLUX','üñº')">üé® FLUX <span class="type">Image</span></div>
        <div class="model-option" onclick="pickModel('Ideogram 3.0','üñº')">üí° Ideogram 3.0 <span class="type">Image</span></div>
        <div class="model-option" onclick="pickModel('WAN 2.2','üé¨')">üé¨ WAN 2.2 <span class="type">Video</span></div>
        <div class="model-option" onclick="pickModel('Lip Sync','üëÑ')">üëÑ Lip Sync <span class="type">Video</span></div>
        <div class="model-option" onclick="pickModel('Voice Studio','üé§')">üé§ Voice Studio <span class="type">Audio</span></div>
      </div>
    </div>
    <button class="history-btn">üïê History</button>
  </div>

  <!-- Chat body -->
  <div class="chat-body" id="chat-body">
    <!-- Empty state -->
    <div class="empty-state" id="empty-state">
      <div class="empty-icon">‚ú®</div>
      <div class="empty-title">Describe what you want to create,<br>or pick a starting point</div>
      <div class="suggestions">
        <div class="suggestion" onclick="useSuggestion('A woman walking through a cyberpunk city at night')">üåÜ Cyberpunk city</div>
        <div class="suggestion" onclick="useSuggestion('Product shot of a perfume bottle on marble')">üì∏ Product shot</div>
        <div class="suggestion" onclick="useSuggestion('Cinematic ocean waves at sunset, slow motion')">üé¨ Ocean sunset</div>
        <div class="suggestion" onclick="useSuggestion('Professional voiceover for a tech ad')">üé§ Voiceover</div>
      </div>
    </div>
  </div>

  <!-- Input -->
  <div class="input-area">
    <div class="input-box">
      <input type="text" placeholder="Describe what you want..." id="prompt-input" onkeydown="if(event.key==='Enter')generate()">
      <button class="attach-btn">üìé</button>
    </div>
    <button class="send-btn" onclick="generate()">‚û§</button>
  </div>
</div>

<!-- ===== SCREEN: ACCOUNT ===== -->
<div class="screen" id="s-account">
  <div class="page-scroll">
    <div class="profile-top">
      <div class="avatar-circle">V</div>
      <div>
        <div class="profile-name">vtarnakin@mail.ru</div>
        <div class="profile-sub">vtarnakin@mail.ru</div>
      </div>
    </div>
    <div class="card">
      <div class="card-title">Account Info</div>
      <div class="row"><span class="row-label">Username</span><span class="row-value">vtarnakin ‚úèÔ∏è</span></div>
      <div class="row"><span class="row-label">Email</span><span class="row-value">vtarnakin@mail.ru ‚úèÔ∏è</span></div>
      <div class="row"><span class="row-label">Password</span><span class="row-value">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚úèÔ∏è</span></div>
      <div class="row"><span class="row-label">Provider</span><span class="row-value">Email/Password</span></div>
      <div class="row"><span class="row-label">Verified</span><span class="row-value" style="color:#f87171">No ‚ö†Ô∏è</span></div>
    </div>
    <div class="card">
      <div class="card-title">Credit History</div>
      <div class="row"><span>Subscription</span><span class="row-value">Trial ¬∑ <span style="color:var(--green)">+200 ü™ô</span></span></div>
    </div>
    <button class="btn-full btn-outline">üö™ Log out</button>
  </div>
</div>

<!-- ===== SCREEN: CREDITS ===== -->
<div class="screen" id="s-credits">
  <div class="page-scroll">
    <div class="plan-card">
      <div class="plan-name">Trial</div>
      <div class="plan-sub">200 Credits ¬∑ One-time</div>
      <div class="bar"><div class="bar-fill"></div></div>
      <div class="bar-info"><span>200/200 left</span><span>Valid: Mar 18, 2026</span></div>
    </div>
    <button class="btn-full btn-accent">‚¨ÜÔ∏è Upgrade Plan</button>
    <div class="section-title">Plans</div>
    <div class="price-card">
      <div class="price-left"><div class="p-name">Starter</div><div class="p-credits">720 credits/mo</div></div>
      <div class="price-right">$9.99<span>/mo</span></div>
    </div>
    <div class="price-card featured">
      <div class="price-left"><div class="p-name">Standard<span class="badge-best">BEST</span></div><div class="p-credits">1560 credits/mo</div></div>
      <div class="price-right">$19.99<span>/mo</span></div>
    </div>
    <div class="price-card">
      <div class="price-left"><div class="p-name">Professional</div><div class="p-credits">4240 credits/mo</div></div>
      <div class="price-right">$49.99<span>/mo</span></div>
    </div>
    <div class="section-title">Payment History</div>
    <div class="card" style="text-align:center;padding:24px;color:var(--muted)">No spending yet</div>
  </div>
</div>

<!-- ===== SCREEN: HELP ===== -->
<div class="screen" id="s-help">
  <div class="page-scroll">
    <div class="section-title" style="margin-top:0">Help Center</div>
    <div class="faq-item"><div class="faq-q">üñº How to generate images?</div><div class="faq-a">Type a description in the AI chat. You can specify ratio, resolution directly in the prompt. E.g. "a cat in space, 16:9, high quality"</div></div>
    <div class="faq-item"><div class="faq-q">üé¨ How to create videos?</div><div class="faq-a">Switch model to WAN 2.2 and describe your scene. You can also say "make a video from this" after generating an image.</div></div>
    <div class="faq-item"><div class="faq-q">ü™ô How do credits work?</div><div class="faq-a">Images cost ~2 credits, videos ~40 credits. Your balance is shown in the top right. Upgrade for more.</div></div>
    <div class="faq-item"><div class="faq-q">üí¨ Can AI remember context?</div><div class="faq-a">Yes! Say "make it bluer" or "now as a video" ‚Äî the AI remembers your previous requests in this session.</div></div>
    <div class="faq-item"><div class="faq-q">üîó Full web version</div><div class="faq-a">Visit app.everypixel.com for the complete desktop experience with all tools.</div></div>
    <div style="text-align:center;margin-top:20px;color:var(--muted);font-size:13px">
      Need help? <a href="mailto:workroom@everypixel.com" style="color:var(--accent)">workroom@everypixel.com</a>
    </div>
  </div>
</div>

<!-- ===== SCREEN: SETTINGS ===== -->
<div class="screen" id="s-settings">
  <div class="page-scroll">
    <div class="section-title" style="margin-top:0">AI Settings</div>
    <div class="card">
      <div class="setting-row"><div><div class="setting-name">Default Image Model</div></div><button class="sel-btn">Seedream 4.0 ‚ñæ</button></div>
      <div class="setting-row"><div><div class="setting-name">Default Video Model</div></div><button class="sel-btn">WAN 2.2 ‚ñæ</button></div>
      <div class="setting-row"><div><div class="setting-name">Language</div></div><button class="sel-btn">English ‚ñæ</button></div>
    </div>
    <div class="card">
      <div class="setting-row"><div><div class="setting-name">Auto-save to Assets</div><div class="setting-desc">Save results automatically</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
      <div class="setting-row"><div><div class="setting-name">Show cost before generating</div><div class="setting-desc">Preview credit usage</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
      <div class="setting-row"><div><div class="setting-name">Enhanced prompts</div><div class="setting-desc">AI improves your prompts</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
      <div class="setting-row"><div><div class="setting-name">Keep chat history</div><div class="setting-desc">Between sessions</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    </div>
    <button class="btn-full btn-outline-muted">üóë Clear Chat History</button>
  </div>
</div>

<!-- NAV -->
<div class="nav">
  <div class="nav-item active" data-screen="chat"><span class="nav-icon">ü§ñ</span>AI</div>
  <div class="nav-item" data-screen="account"><span class="nav-icon">üë§</span>Account</div>
  <div class="nav-item" data-screen="credits"><span class="nav-icon">üí≥</span>Credits</div>
  <div class="nav-item" data-screen="help"><span class="nav-icon">‚ùì</span>Help</div>
  <div class="nav-item" data-screen="settings"><span class="nav-icon">‚öôÔ∏è</span>Settings</div>
</div>

<script>
// Navigation
document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    item.classList.add('active');
    document.getElementById('s-' + item.dataset.screen).classList.add('active');
  });
});

// Model selector
function toggleModels() {
  document.getElementById('model-dropdown').classList.toggle('open');
}
function pickModel(name) {
  document.getElementById('current-model').textContent = name;
  document.getElementById('model-dropdown').classList.remove('open');
  document.querySelectorAll('.model-option').forEach(o => {
    o.classList.toggle('selected', o.textContent.includes(name));
  });
}
document.addEventListener('click', (e) => {
  if (!e.target.closest('.model-wrap')) {
    document.getElementById('model-dropdown').classList.remove('open');
  }
});

// Suggestions
function useSuggestion(text) {
  document.getElementById('prompt-input').value = text;
  generate();
}

// Generate
const images = [
  'https://images.unsplash.com/photo-1558618666-fcd25c85f82e?w=500&q=80',
  'https://images.unsplash.com/photo-1534996858221-380b92700493?w=500&q=80',
  'https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=500&q=80',
  'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=500&q=80',
];
let imgIdx = 0;
let credits = 200;

function scrollDown() {
  const el = document.getElementById('chat-body');
  el.scrollTop = el.scrollHeight;
}

function generate() {
  const input = document.getElementById('prompt-input');
  const text = input.value.trim();
  if (!text) return;
  input.value = '';

  // Hide empty state
  const empty = document.getElementById('empty-state');
  if (empty) empty.style.display = 'none';

  const body = document.getElementById('chat-body');
  const model = document.getElementById('current-model').textContent;
  const isVideo = model.includes('WAN') || model.includes('Lip');
  const cost = isVideo ? 40 : 2;

  // User message
  const userEl = document.createElement('div');
  userEl.className = 'msg-block';
  userEl.innerHTML = `
    <div class="msg-user-block">
      <div class="msg-user-label">üë§ You</div>
      <div class="msg-user-text">${text}</div>
    </div>`;
  body.appendChild(userEl);
  scrollDown();

  // AI loading
  const loadId = 'load-' + Date.now();
  const loadEl = document.createElement('div');
  loadEl.className = 'msg-block';
  loadEl.id = loadId;
  loadEl.innerHTML = `
    <div class="msg-ai-block">
      <div class="msg-ai-label">‚ú® Workroom AI</div>
      <div class="msg-ai-text">Generating with <b>${model}</b>...</div>
      <div class="msg-ai-meta">
        <span class="meta-tag">Model: <b>${model}</b></span>
        <span class="meta-tag">Cost: <b>${cost} ü™ô</b></span>
      </div>
      <div class="progress-wrap">
        <div class="progress-bar"><div class="progress-fill"></div></div>
      </div>
    </div>`;
  body.appendChild(loadEl);
  scrollDown();

  // Result after delay
  setTimeout(() => {
    credits -= cost;
    document.getElementById('credit-count').textContent = credits;
    const img = images[imgIdx % images.length];
    imgIdx++;

    loadEl.innerHTML = `
      <div class="msg-ai-block">
        <div class="msg-ai-label">‚ú® Workroom AI</div>
        <div class="msg-ai-text">Done! Here's your ${isVideo ? 'video' : 'image'}:</div>
        <div class="msg-ai-meta">
          <span class="meta-tag">Model: <b>${model}</b></span>
          <span class="meta-tag">Cost: <b>${cost} ü™ô</b></span>
          <span class="meta-tag">Remaining: <b>${credits} ü™ô</b></span>
        </div>
        <div class="result-card">
          <img class="result-image" src="${img}" alt="result">
          <div class="result-footer">
            <div class="result-cost">${isVideo ? 'üé¨' : 'üñº'} ${model}</div>
            <div class="result-actions">
              <button class="r-btn">üíæ</button>
              <button class="r-btn">üì§</button>
              <button class="r-btn r-btn-primary" onclick="document.getElementById('prompt-input').value='Make it more vibrant';document.getElementById('prompt-input').focus();">üîÑ</button>
            </div>
          </div>
        </div>
      </div>`;
    scrollDown();
  }, 2500);
}
</script>
</body>
</html>
